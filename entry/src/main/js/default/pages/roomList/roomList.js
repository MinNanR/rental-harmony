export default {
    data: {
        title: 'World',
        list: [
            {
                "floor": 1,
                "roomList": [
                    {
                        "id": 27,
                        "roomNumber": "101",
                        "floor": 1,
                        "price": 190,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 788.00,
                        "electricity": 620.00
                    },
                    {
                        "id": 28,
                        "roomNumber": "102",
                        "floor": 1,
                        "price": 240,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 536.00,
                        "electricity": 3569.00
                    },
                    {
                        "id": 29,
                        "roomNumber": "103",
                        "floor": 1,
                        "price": 210,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 445.00,
                        "electricity": 2676.00
                    },
                    {
                        "id": 30,
                        "roomNumber": "104",
                        "floor": 1,
                        "price": 160,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 438.00,
                        "electricity": 8111.00
                    },
                    {
                        "id": 31,
                        "roomNumber": "105",
                        "floor": 1,
                        "price": 200,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 248.00,
                        "electricity": 1795.00
                    },
                    {
                        "id": 32,
                        "roomNumber": "106",
                        "floor": 1,
                        "price": 260,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 548.00,
                        "electricity": 373.00
                    },
                    {
                        "id": 33,
                        "roomNumber": "107",
                        "floor": 1,
                        "price": 170,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 447.00,
                        "electricity": 5.00
                    },
                    {
                        "id": 34,
                        "roomNumber": "108",
                        "floor": 1,
                        "price": 190,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 471.00,
                        "electricity": 6881.00
                    },
                    {
                        "id": 24,
                        "roomNumber": "前1",
                        "floor": 1,
                        "price": 170,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 329.00,
                        "electricity": 2294.00
                    },
                    {
                        "id": 25,
                        "roomNumber": "前2",
                        "floor": 1,
                        "price": 170,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 954.00,
                        "electricity": 3130.00
                    },
                    {
                        "id": 26,
                        "roomNumber": "前3",
                        "floor": 1,
                        "price": 170,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 83.00,
                        "electricity": 561.00
                    }
                ]
            },
            {
                "floor": 2,
                "roomList": [
                    {
                        "id": 35,
                        "roomNumber": "201",
                        "floor": 2,
                        "price": 200,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 678.00,
                        "electricity": 354.00
                    },
                    {
                        "id": 36,
                        "roomNumber": "202",
                        "floor": 2,
                        "price": 180,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 1076.00,
                        "electricity": 5906.00
                    },
                    {
                        "id": 37,
                        "roomNumber": "203",
                        "floor": 2,
                        "price": 240,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 164.00,
                        "electricity": 726.00
                    },
                    {
                        "id": 38,
                        "roomNumber": "204",
                        "floor": 2,
                        "price": 230,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 516.00,
                        "electricity": 4354.00
                    },
                    {
                        "id": 39,
                        "roomNumber": "205",
                        "floor": 2,
                        "price": 250,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 173.00,
                        "electricity": 3167.00
                    },
                    {
                        "id": 40,
                        "roomNumber": "206",
                        "floor": 2,
                        "price": 180,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 518.00,
                        "electricity": 1358.00
                    },
                    {
                        "id": 41,
                        "roomNumber": "207",
                        "floor": 2,
                        "price": 160,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 360.00,
                        "electricity": 3851.00
                    },
                    {
                        "id": 42,
                        "roomNumber": "208",
                        "floor": 2,
                        "price": 180,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 593.00,
                        "electricity": 3432.00
                    },
                    {
                        "id": 43,
                        "roomNumber": "209",
                        "floor": 2,
                        "price": 160,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 345.00,
                        "electricity": 442.00
                    },
                    {
                        "id": 44,
                        "roomNumber": "210",
                        "floor": 2,
                        "price": 180,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 247.00,
                        "electricity": 2387.00
                    },
                    {
                        "id": 45,
                        "roomNumber": "211",
                        "floor": 2,
                        "price": 230,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 428.00,
                        "electricity": 5269.00
                    }
                ]
            },
            {
                "floor": 3,
                "roomList": [
                    {
                        "id": 46,
                        "roomNumber": "301",
                        "floor": 3,
                        "price": 160,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 398.00,
                        "electricity": 522.00
                    },
                    {
                        "id": 47,
                        "roomNumber": "302",
                        "floor": 3,
                        "price": 160,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 321.00,
                        "electricity": 2707.00
                    },
                    {
                        "id": 48,
                        "roomNumber": "303",
                        "floor": 3,
                        "price": 230,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 302.00,
                        "electricity": 4866.00
                    },
                    {
                        "id": 49,
                        "roomNumber": "304",
                        "floor": 3,
                        "price": 240,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 378.00,
                        "electricity": 3648.00
                    },
                    {
                        "id": 50,
                        "roomNumber": "305",
                        "floor": 3,
                        "price": 180,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 921.00,
                        "electricity": 8854.00
                    },
                    {
                        "id": 51,
                        "roomNumber": "306",
                        "floor": 3,
                        "price": 260,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 373.00,
                        "electricity": 6904.00
                    },
                    {
                        "id": 52,
                        "roomNumber": "307",
                        "floor": 3,
                        "price": 180,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 527.00,
                        "electricity": 4404.00
                    },
                    {
                        "id": 53,
                        "roomNumber": "308",
                        "floor": 3,
                        "price": 210,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 584.00,
                        "electricity": 286.00
                    },
                    {
                        "id": 54,
                        "roomNumber": "309",
                        "floor": 3,
                        "price": 180,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 488.00,
                        "electricity": 559.00
                    },
                    {
                        "id": 55,
                        "roomNumber": "310",
                        "floor": 3,
                        "price": 210,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 735.00,
                        "electricity": 4179.00
                    },
                    {
                        "id": 56,
                        "roomNumber": "311",
                        "floor": 3,
                        "price": 170,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 360.00,
                        "electricity": 516.00
                    },
                    {
                        "id": 57,
                        "roomNumber": "312",
                        "floor": 3,
                        "price": 230,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 8.00,
                        "electricity": 3219.00
                    }
                ]
            },
            {
                "floor": 4,
                "roomList": [
                    {
                        "id": 58,
                        "roomNumber": "401",
                        "floor": 4,
                        "price": 150,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 6.00,
                        "electricity": 3532.00
                    },
                    {
                        "id": 59,
                        "roomNumber": "402",
                        "floor": 4,
                        "price": 140,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 116.00,
                        "electricity": 2414.00
                    },
                    {
                        "id": 60,
                        "roomNumber": "403",
                        "floor": 4,
                        "price": 180,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 442.00,
                        "electricity": 9068.00
                    },
                    {
                        "id": 62,
                        "roomNumber": "405",
                        "floor": 4,
                        "price": 170,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 121.00,
                        "electricity": 4473.00
                    },
                    {
                        "id": 61,
                        "roomNumber": "406",
                        "floor": 4,
                        "price": 230,
                        "status": "空闲",
                        "statusCode": "VACANT",
                        "water": 549.00,
                        "electricity": 1094.00
                    },
                    {
                        "id": 63,
                        "roomNumber": "411",
                        "floor": 4,
                        "price": 230,
                        "status": "在租",
                        "statusCode": "ON_RENT",
                        "water": 527.00,
                        "electricity": 7005.00
                    }
                ]
            }
        ],
        tabCur: 0,
        curHeight: 0
    },
    onIndexClick(index) {
        this.tabCur = index
        let floor = this.list[index]
        let roomListDOM = this.$element("list")
        roomListDOM.scrollTo({
            index: floor.index
        })
        this.curHeight = floor.height
    },
    onShow() {
        this.calculate()
    },
    calculate() {
        let index = 0
        let height = 0
        let barHeight = 60
        let itemHeight = 90
        this.list.forEach(floor => {
            let roomList = floor.roomList
            floor.index = index
            index++
            floor.top = height
            floor.height = barHeight
            height += barHeight
            roomList.forEach(room => {
                height = height + itemHeight
                room.index = index
                index++
            })
            floor.bottom = height
        })
    },
    onScrollEnd(event) {
        let info = {
            state : event.scrollState,
            y: event.scrollY
        }
        console.info(JSON.stringify(info))
        let y = event.scrollY
        let state = event.scrollState
        if (state !== 0) {
            this.curHeight += y
            return
        }
        //用户滑动停止时计算
        let h = this.curHeight + 10
        for (let i = 0; i < this.list.length; i++) {
            if (h > this.list[i].top && h < this.list[i].bottom) {
                this.tabCur = i
                return
            }
        }
    },
    clickFunc() {
        try {
            let ref = this.$element("list")
            console.info(ref)
            let btn = this.$refs.btn
            let attr = btn.attr
            for (let a in attr) {
                console.info(`${a}=${attr[a]}`)
            }
            ref.scrollTo({
                index: 20
            })
        } catch (err) {
            console.error(err)
        }

    }
}
